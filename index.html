<head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">

    <meta name="viewport" content="width=device-width, initial-scale=1">
    <script src="lib/jquery/jquery-1.11.3.min.js"></script>
    <script src="lib/nouislider/nouislider.min.js"></script>
    <script src="lib/paper/paper-full.min.js"></script>
    <script src="lib/filesaver/FileSaver.min.js"></script>
    <script src="lib/three/three.min.js"></script>
    <script src="lib/popdown/jquery.popdown.min.js"></script>

    <link rel="stylesheet" href="lib/nouislider/nouislider.min.css">

    <link rel="stylesheet" href="lib/material/material.min.css">
    <script src="lib/material/material.min.js"></script>
    <link rel="stylesheet" href="https://fonts.googleapis.com/icon?family=Material+Icons">

    <link rel="shortcut icon" href="favicon.ico" type="image/x-icon">
    <link rel="icon" href="favicon.ico" type="image/x-icon">
    <link rel="stylesheet" href="modified.css">
</head>

<body>
<script>
    // Warning before leaving the page (back button, or outgoinglink)
    window.onbeforeunload = function() {
        return "Do you really want to leave 3DuF?";
        //if we return nothing here (just calling return;) then there will be no pop-up question at all
        //return;
    };
</script>
<div id="main_window" class="mdl-layout mdl-js-layout mdl-layout--fixed-drawer
            mdl-layout--overlay-drawer-button ">
    <div id="button_drawer" class="mdl-layout__drawer">
        <img class="logo" src="img/logo.png">

        <nav class="mdl-navigation" id="general-tools">

            <div class="button_row">
                <a id="resize_button" class="mdl-button mdl-js-button mdl-js-ripple-effect mdl-button--raised feature-button">
                    Edit Device</a>
            </div>

            <div class="button_row">
                <a id="select_button" class="mdl-button mdl-js-button mdl-js-ripple-effect mdl-button--raised feature-button">
                    Select Tool</a>
            </div>

        </nav>

        <span class="mdl-layout-title">Select Feature</span>
        <nav class="mdl-navigation" id="feature-misc">

            <div class="button_row">
                <a id="channel_button" class="mdl-button mdl-js-button mdl-js-ripple-effect mdl-button--raised feature-button">Channel</a>
                <button id="channel_params_button" class="params-button mdl-button mdl-js-button mdl-button--icon">
                    <i class="material-icons">settings</i>
                </button>
            </div>
            <div class="button_row">
                <a id="roundedchannel_button" class="mdl-button mdl-js-button mdl-js-ripple-effect mdl-button--raised feature-button">Rounded Channel</a>
                <button id="roundedchannel_params_button" class="params-button mdl-button mdl-js-button mdl-button--icon">
                    <i class="material-icons">settings</i>
                </button>
            </div>

            <div class="button_row">
                <a id="transition_button" class="mdl-button mdl-js-button mdl-js-ripple-effect mdl-button--raised feature-button">Transition</a>
                <button id="transition_params_button" class="params-button mdl-button mdl-js-button mdl-button--icon">
                    <i class="material-icons">settings</i>
                </button>
            </div>
            <div class="button_row">
                <a id="alignmentmarks_button" class="mdl-button mdl-js-button mdl-js-ripple-effect mdl-button--raised feature-button">Alignment Marks</a>
                <button id="alignmentmarks_params_button" class="params-button mdl-button mdl-js-button mdl-button--icon">
                    <i class="material-icons">settings</i>
                </button>
            </div>

        </nav>
        <span class="mdl-layout-title">Mix</span>
        <nav class="mdl-navigation" id="feature-mix">

            <div class="button_row">
                <a id="bettermixer_button" class="mdl-button mdl-js-button mdl-js-ripple-effect mdl-button--raised feature-button">Mixer</a>
                <button id="bettermixer_params_button" class="params-button mdl-button mdl-js-button mdl-button--icon">
                    <i class="material-icons">settings</i>
                </button>
            </div>

            <div class="button_row">
                <a id="gradientgenerator_button" class="mdl-button mdl-js-button mdl-js-ripple-effect mdl-button--raised feature-button">Gradient Gen</a>
                <button id="gradientgenerator_params_button" class="params-button mdl-button mdl-js-button mdl-button--icon">
                    <i class="material-icons">settings</i>
                </button>
            </div>

            <div class="button_row">
                <a id="curvedmixer_button" class="mdl-button mdl-js-button mdl-js-ripple-effect mdl-button--raised feature-button">Curved Mixer</a>
                <button id="curvedmixer_params_button" class="params-button mdl-button mdl-js-button mdl-button--icon">
                    <i class="material-icons">settings</i>
                </button>
            </div>
            <div class="button_row">
                <a id="rotarymixer_button" class="mdl-button mdl-js-button mdl-js-ripple-effect mdl-button--raised feature-button">Rotary Mixer</a>
                <button id="rotarymixer_params_button" class="params-button mdl-button mdl-js-button mdl-button--icon">
                    <i class="material-icons">settings</i>
                </button>
            </div>
        </nav>
        <span class="mdl-layout-title">Control</span>
        <nav class="mdl-navigation" id="feature-control">

            <div class="button_row">
                <a id="circleValve_button" class="mdl-button mdl-js-button mdl-js-ripple-effect mdl-button--raised feature-button">Circle Valve</a>
                <button id="circleValve_params_button" class="params-button mdl-button mdl-js-button mdl-button--icon">
                    <i class="material-icons">settings</i>
                </button>
            </div>
            <div class="button_row">
                <a id="valve3d_button" class="mdl-button mdl-js-button mdl-js-ripple-effect mdl-button--raised feature-button">Valve3D</a>
                <button id="valve3d_params_button" class="params-button mdl-button mdl-js-button mdl-button--icon">
                    <i class="material-icons">settings</i>
                </button>
            </div>
            <div class="button_row">
                <a id="valve_button" class="mdl-button mdl-js-button mdl-js-ripple-effect mdl-button--raised feature-button">Valve</a>
                <button id="valve_params_button" class="params-button mdl-button mdl-js-button mdl-button--icon">
                    <i class="material-icons">settings</i>
                </button>
            </div>
        </nav>

        <span class="mdl-layout-title">Process</span>
        <nav class="mdl-navigation" id="feature-process">

            <div class="button_row">
                <a id="celltrapl_button" class="mdl-button mdl-js-button mdl-js-ripple-effect mdl-button--raised feature-button">Cell Trap</a>
                <button id="celltrapl_params_button" class="params-button mdl-button mdl-js-button mdl-button--icon">
                    <i class="material-icons">settings</i>
                </button>
            </div>
            <div class="button_row">
                <a id="diamond_button" class="mdl-button mdl-js-button mdl-js-ripple-effect mdl-button--raised feature-button">Diamond Chamber</a>
                <button id="diamond_params_button" class="params-button mdl-button mdl-js-button mdl-button--icon">
                    <i class="material-icons">settings</i>
                </button>
            </div>
            <div class="button_row">
                <a id="chamber_button" class="mdl-button mdl-js-button mdl-js-ripple-effect mdl-button--raised feature-button">Chamber</a>
                <button id="chamber_params_button" class="params-button mdl-button mdl-js-button mdl-button--icon">
                    <i class="material-icons">settings</i>
                </button>
            </div>
            <div class="button_row">
                <a id="dropletgen_button" class="mdl-button mdl-js-button mdl-js-ripple-effect mdl-button&#45;&#45;raised feature-button">Droplet Gen</a>
                <button id="dropletgen_params_button" class="params-button mdl-button mdl-js-button mdl-button&#45;&#45;icon">
                    <i class="material-icons">settings</i>
                </button>
            </div>
        </nav>
        <span class="mdl-layout-title">Distribute</span>

        <nav class="mdl-navigation" id="feature-distribute">

            <div class="button_row">
                <a id="port_button" class="mdl-button mdl-js-button mdl-js-ripple-effect mdl-button--raised feature-button">Port</a>
                <button id="port_params_button" class="params-button mdl-button mdl-js-button mdl-button--icon">
                    <i class="material-icons">settings</i>
                </button>
            </div>
            <div class="button_row">
                <a id="via_button" class="mdl-button mdl-js-button mdl-js-ripple-effect mdl-button--raised feature-button">Via</a>
                <button id="via_params_button" class="params-button mdl-button mdl-js-button mdl-button--icon">
                    <i class="material-icons">settings</i>
                </button>
            </div>
            <div class="button_row" hidden="true">
                <a id="mixer_button" class="mdl-button mdl-js-button mdl-js-ripple-effect mdl-button--raised feature-button">Mixer</a>
                <button id="mixer_params_button" class="params-button mdl-button mdl-js-button mdl-button--icon">
                    <i class="material-icons">settings</i>
                </button>
            </div>
            <div class="button_row">
                <a id="tree_button" class="mdl-button mdl-js-button mdl-js-ripple-effect mdl-button--raised feature-button">Tree</a>
                <button id="tree_params_button" class="params-button mdl-button mdl-js-button mdl-button--icon">
                    <i class="material-icons">settings</i>
                </button>
            </div>
            <div class="button_row">
                <a id="ytree_button" class="mdl-button mdl-js-button mdl-js-ripple-effect mdl-button--raised feature-button">Y-Tree</a>
                <button id="ytree_params_button" class="params-button mdl-button mdl-js-button mdl-button--icon">
                    <i class="material-icons">settings</i>
                </button>
            </div>
            <div class="button_row">
                <a id="mux_button" class="mdl-button mdl-js-button mdl-js-ripple-effect mdl-button--raised feature-button">Mux</a>
                <button id="mux_params_button" class="params-button mdl-button mdl-js-button mdl-button--icon">
                    <i class="material-icons">settings</i>
                </button>
            </div>
            <div class="button_row">
                <a id="transposer_button" class="mdl-button mdl-js-button mdl-js-ripple-effect mdl-button--raised feature-button">Transposer</a>
                <button id="transposer_params_button" class="params-button mdl-button mdl-js-button mdl-button--icon">
                    <i class="material-icons">settings</i>
                </button>
            </div>

        </nav>
        <span class="mdl-layout-title">QoL Operations</span>
        <nav class="mdl-navigation" id="qol-controls">
            <a id="revertdefaults_button" class="mdl-button mdl-js-button mdl-js-ripple-effect mdl-button--raised view-button">Flow</a>
        </nav>
        <span class="mdl-layout-title">Select Layer</span>
        <nav class="mdl-navigation" id="layer-controls">
            <a id="flow_button" class="mdl-button mdl-js-button mdl-js-ripple-effect mdl-button--raised view-button">Flow</a>
            <a id="control_button" class="mdl-button mdl-js-button mdl-js-ripple-effect mdl-button--raised view-button">Control</a>
            <a id="cells_button" class="mdl-button mdl-js-button mdl-js-ripple-effect mdl-button--raised view-button">Cells</a>
        </nav>
        <span class="mdl-layout-title">Select View</span>
        <nav class="mdl-navigation">
            <a id="button_2D" class="mdl-button mdl-js-button mdl-js-ripple-effect mdl-button--raised view-button">2D</a>
            <!--<a id="button_3D" class="mdl-button mdl-js-button mdl-js-ripple-effect mdl-button--raised view-button">3D</a>-->
        </nav>
        <span class="mdl-layout-title">Save</span>
        <nav class="mdl-navigation">
            <a id="interchange_button" class="mdl-button mdl-js-button mdl-js-ripple-effect view-button">JSON (.json)</a>
            <a id="svg_button" class="mdl-button mdl-js-button mdl-js-ripple-effect view-button">Vector Art (.svg)</a>
            <!-- <a id="stl_button" class="mdl-button mdl-js-button mdl-js-ripple-effect view-button">3D Model (.stl)</a>-->
        </nav>
        <a id="infobutton" class="popdown btn mdl-layout-title" title="About">About/Help</a>
        <br/>
        <br />

    </div>
    <main class="mdl-layout__content">
        <div id="view_container" class="page-content">
            <div id="canvas_block" class="shown-block fade-transition">
                <canvas id="c" tabindex="0" resize></canvas>
            </div>
            <div id="renderContainer" class="hidden-block fade-transition" >
            </div>
        </div>
    </main>
</div>

<dialog id="help_dialog" class="mdl-dialog">
    <div class="mdl-dialog__content">
        <div class="demo-card-wide mdl-card mdl-shadow--2dp">
            <div class="mdl-card__title">
                <h2 class="mdl-card__title-text">3DuF v1.0</h2>
            </div>
            <div class="mdl-card__supporting-text">
                <img src="img/cidar_logo.png" width="100%">
                3DuF is microfluidic design environment developed by <a href="http://cidarlab.org" target="_blank">CIDAR</a>.
                Source code, issue tracking and feature requests are available at <a href="https://github.com/CIDARLAB/3DuF/" target="_blank">Github</a>.
                <hr />
                <h5>Usage</h5>
                <table class="tg">
                    <tr>
                        <td class="tg-yw4l"><pre>del</pre></td>
                        <td class="tg-yw4l">- Delete Feature</td>
                    </tr>
                    <tr>
                        <td class="tg-yw4l"><pre>left click</pre></td>
                        <td class="tg-yw4l">- Place Feature</td>
                    </tr>
                    <tr>
                        <td class="tg-yw4l"><pre>right click</pre></td>
                        <td class="tg-yw4l">- Select Feature</td>
                    </tr>
                    <tr>
                        <td class="tg-yw4l"><pre>mouse scroll</pre></td>
                        <td class="tg-yw4l">- Zoom</td>
                    </tr>
                    <tr>
                        <td class="tg-yw4l"><pre>arrow keys</pre></td>
                        <td class="tg-yw4l">- Pan</td>
                    </tr>
                </table>
                <hr/>
                Developed by:
                Aaron Heuckroth, Joshua Lippai and Radhakrishna Sanka.

            </div>

            <div class="mdl-card__menu">
                <button class="mdl-button mdl-button--icon mdl-js-button mdl-js-ripple-effect close">
                    <i class="material-icons">clear</i>
                </button>
            </div>
        </div>

    </div>
</dialog>

<dialog id="edit_device_dialog" class="mdl-dialog">
    <div class="mdl-dialog__content">
        <!-- Textfield with Floating Label -->
        <h4>
            Rename:
        </h4>
        <form action="#">
            <div class="mdl-textfield mdl-js-textfield mdl-textfield--floating-label">
                <input class="mdl-textfield__input" type="text" id="devicename_textinput">
                <label class="mdl-textfield__label" for="devicename_textinput">Device Name</label>
            </div>
        </form>

        <h4>
           Resize:
        </h4>
        <!-- Numeric Textfield with Floating Label -->
        <form action="#">
            <div class="mdl-textfield mdl-js-textfield mdl-textfield--floating-label">
                <input class="mdl-textfield__input" type="text" pattern="-?[0-9]*(\.[0-9]+)?" id="xspan_textinput">
                <label class="mdl-textfield__label" for="xspan_textinput">X-Span (mm)</label>
                <span class="mdl-textfield__error">Input is not a number!</span>
            </div>
            <div class="mdl-textfield mdl-js-textfield mdl-textfield--floating-label">
                <input class="mdl-textfield__input" type="text" pattern="-?[0-9]*(\.[0-9]+)?" id="yspan_textinput">
                <label class="mdl-textfield__label" for="yspan_textinput">Y-Span (mm)</label>
                <span class="mdl-textfield__error">Input is not a number!</span>
            </div>

        </form>
    </div>
    <div class="mdl-dialog__actions mdl-dialog__actions--full-width">
        <button id="accept_resize_button" type="button" class="mdl-button">Save</button>
        <button type="button" class="mdl-button close">Cancel</button>
    </div>
</dialog>
<script>
    var dialog = document.querySelector('#edit_device_dialog');
    var showModalButton = document.querySelector('#resize_button');
    if (! dialog.showModal) {
        dialogPolyfill.registerDialog(dialog);
    }
    showModalButton.addEventListener('click', function() {
        dialog.showModal();
    });
    dialog.querySelector('.close').addEventListener('click', function() {
        dialog.close();
    });

    var helpdialog = document.querySelector('#help_dialog');
    var showhelpModalButton = document.querySelector('#infobutton');

    if (! helpdialog.showModal) {
        dialogPolyfill.registerDialog(helpdialog);
    }

    showhelpModalButton.addEventListener('click', function() {
        helpdialog.showModal();
    });

    helpdialog.querySelector('.close').addEventListener('click', function() {
        helpdialog.close();
    });

</script>
</body>

<script src="3DuFApp.js"></script>
